/* Minecraft-like blocky styling */
* { box-sizing: border-box; font-family: "Minecraftia", "Press Start 2P", monospace, system-ui, sans-serif; }
body { margin: 0; padding: 18px; background: linear-gradient(#87ceeb, #7ec850); color: #111; }
.title { text-align: center; margin-bottom: 14px; font-weight:700; font-size:20px }
.board { display: flex; gap: 12px; }
.player { flex: 1; background: linear-gradient(#c8f7a6,#9ad06a); border: 4px solid #333; padding: 10px; min-height: 760px; position: relative; box-shadow: 6px 6px 0 rgba(0,0,0,0.2); }
.player h2 { margin:6px 0; font-size:14px; text-shadow:1px 1px 0 #fff; }
.track { position: relative; gap: 6px; padding: 6px; border: 3px solid #5b4a3b; background: repeating-linear-gradient(45deg,#8b6b3a 0 10px,#a07a47 10px 20px); height: 640px; overflow:visible }

/* cells should be above other elements so numbers are always visible */
.cell{ width: 140px; height: 56px; display:flex; align-items:center; justify-content:center; border:2px solid #b58f3f; box-shadow:3px 3px 0 rgba(0,0,0,0.12); font-weight:700; color:#111; background: linear-gradient(180deg, #f5f6f7 0%, #eceff1 100%); border-radius: 6px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.6); z-index: 1000 }
.cell { position: relative }
.cell-index{ font-size:18px; font-weight:900; color:#1f1f1f; z-index:1001 }

/* make sprites sit behind cells and arrows so cells are fully visible */
.sprite{ z-index:5 }
.arrows{ z-index:6 }

/* ensure left house is topmost so its pink roof shows clearly */
#house-left{ z-index: 20000; position: relative }
#house-left svg{ width:160px }

/* visual blocks removed: using sprite-only positions */
.track-grid{ position: absolute; left: 50%; transform: translateX(-50%); bottom: 0px; display:flex; flex-direction:column; gap:8px; align-items:center; justify-content:flex-end; background: linear-gradient(180deg, #f2f3f4 0%, #e9ebee 100%); padding:6px; border-radius:8px }
.intro-banner{ text-align:center; background:#fff9e6; border:3px solid #3b2d24; padding:10px 12px; font-weight:700; margin-bottom:8px; box-shadow:4px 4px 0 rgba(0,0,0,0.12) }
.player .house{ position:absolute; top:8px; left:50%; transform:translateX(-50%); z-index:9999 }
.player .house svg{ width:160px; height:auto }
.track-grid{ /* make grid span from just above sprite baseline to just below house */
  top: 120px; /* leaves room for house */
  bottom: 112px; /* leaves room for sprite baseline */
  height: calc(100% - 120px - 112px);
}
.controls { margin-top: 12px; display:flex; gap:8px; align-items:center; justify-content:center }
.overlay { position: fixed; left: 0; top: 0; right:0; bottom:0; background: rgba(0,0,0,0.6); display:flex; align-items:center; justify-content:center }
.panel { background: #efe6d6; padding: 14px; border: 3px solid #3b2d24; width: 460px; max-width: 95%; box-shadow: 6px 6px 0 rgba(0,0,0,0.25); }
.hidden { display:none }
.choices { display:flex; gap:8px; justify-content:center; margin-top:12px }
.path-btn { padding: 12px 18px; font-size: 14px; border: 2px solid #333; background:#d2b48c; cursor:pointer }
#choices { display:flex; flex-direction:column; gap:8px; margin-top:12px }
.choice-btn { padding:10px; border:2px solid #333; background:#fff; text-align:left; cursor:pointer }
.timer { margin-top:8px; font-weight:700 }
.result { margin-top:8px; font-weight:800 }
/* track is now an empty container used to position sprites and house */
.fireworks { position:absolute; inset:0; pointer-events:none; font-size:40px; display:flex; align-items:center; justify-content:center }
.sprite { width:84px; height:84px; background:linear-gradient(#fff3bf,#ffd54f); border:2px solid #7a3f00; display:flex; align-items:center; justify-content:center; font-weight:900; box-shadow: 3px 3px 0 rgba(0,0,0,0.2); font-size:36px; border-radius:8px }
.house { position:absolute; top:8px; left:50%; transform:translateX(-50%); font-size:14px }
.arrows { position:absolute; bottom:12px; left:50%; transform:translateX(-50%); display:flex; gap:10px; }
.arrow { width:48px; height:48px; background:#d2b48c; border:2px solid #333; display:flex; align-items:center; justify-content:center; cursor:pointer }
.arrow.hidden { visibility:hidden }
.player.active { outline: 4px solid #ffd700; box-shadow: 8px 8px 0 rgba(0,0,0,0.3); }
.house{ z-index: 9999; position: relative; }
.house svg{ z-index: 10000; position: relative; width:140px }
.sprite{ z-index:5 }
.arrows{ z-index:6 }
@media (max-width:900px){ .board{flex-direction:column} }

/* --- Unified house layout for both players --- */
.player .house, #house-left, #house-right { position: absolute; top: 8px; left: 50%; transform: translateX(-50%); z-index: 9999; }
.player .house svg, #house-left svg, #house-right svg { width: 160px; height: auto; z-index: 10000; }

/* Ensure both tracks render the same layout */
#player-left, #player-right { display: block }
